# centos服务器安装英伟达显卡计算环境



## 1.复制cuda.rpm，NVIDIA-Linux.run

```bash
scp

rpm -ivh cuda-repo-rhel7-10-1-local-10.1.105-418.39-1.0-1.x86_64.rpm
```



## 2. 配置源，禁用yum插件，安装epel源

```bash
sed -i 's/enabled=1/enabled=0/' /etc/yum/pluginconf.d/fastestmirror.conf

yum -y install yum-utils

yum-config-manager --disable updates

yum -y install epel-release
```



## 3. 屏蔽默认显卡内核模块

```bash
cat << EOF > /etc/modprobe.d/nvidia-installer-disable-nouveau.conf

\# generated by nvidia-installer

blacklist nouveau

options nouveau modeset=0

EOF
```



## 4.移除默认显卡内核模块

```
modprobe -r nouveau
```



## 5.生成不带nouveau显卡模块的内核image

```bash
mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bak

dracut /boot/initramfs-$(uname -r).img $(uname -r)
```



## 6.安装依赖

```
yum -y install gcc kernel-devel kernel-headers
```



## 7.安装驱动，cuda

```bash
sh NVIDIA-Linux.run

yum -y install cuda
```



## 8.配置环境变量

```bash
echo 'export PATH=$PATH:/usr/local/cuda-10.1/bin' >> /etc/profile

echo 'export LD_LIBRARY_PATH=/usr/local/cuda-10.1/lib64' >> /etc/profile
```



## 9.重启系统

```bash
reboot
```



## 10.执行命令验证安装

```bash
nvidia-smi
```



## 11.编写cuda程序编译并执行